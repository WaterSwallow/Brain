<!--      Mohamed Masoud,  (Sergey Plis Lab) - 2021      -->
<!--     For [1, 38, 38, 38, 1] input shape, MeshNet     -->
<html>
  <head>
     <meta charset="utf-8" />
     <link rel="shortcut icon" href="#">
     <!-- Tensorflow.js -->
     <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>     
     <script type="text/javascript" src="js/nifti-reader.js"></script>   
     <script type="text/javascript" src="js/mainNiftiReadingFunctions.js"></script>   
     <script type="text/javascript" src="js/mainMeshNetFunctions.js"></script> 
     <!-- ml.js - Machine learning tools in JavaScript -->
     <script src="https://www.lactame.com/lib/ml/6.0.0/ml.min.js"></script>

     <script src="https://d3js.org/d3.v4.min.js"></script> 
  </head>
  <body onload="inputVolumeChange()">

    <h1>MeshNet timing with tfjs for whole Brain</h1>

    <p>Measure the performance of tfjs when loading a pretrained MeshNet model in the browser to make whole brain inference.</p>

    <p>Select NIfTI file(*.nii, *.nii.gz) :  <input type="file" id="file" name="files" /></p>
<!--     <p>Select NIfTI label file(*.nii, *.nii.gz) :  <input type="file" id="labelFile" /></p> -->
    <div >
        <canvas id="inputCanvas" width="100" height="100"></canvas> 
<!--         <canvas id="labelCanvas" width="100" height="100"></canvas><br/> -->
        <canvas id="outputCanvas" width="100" height="100"></canvas><br/>
        <p>Slice :<input type="range" min="0" max="100" value="50" class="slider" id="sliceNav"><font id="sliceNumId"></font></p>
    </div>  

    <p>Batch Size : <input type="text" id="batchSizeId" size="20" value="1" onchange="inputVolumeChange()" disabled></p>
    <p>Num of Channels : <input type="text" id="numOfChanId" size="20" value="1" onchange="inputVolumeChange()" disabled></p>
    <p>Num of Classes : <input type="text" id="numOfClassesId" size="20" value="3" disabled></p>    

    <p id="inputVolumeId"></p>

    <button onclick="runInference()">Run</button>
    <p id="completed"></p>
    <p id="results"></p>

    <script type="text/javascript">
      document.getElementById('file').addEventListener('change', handleFileSelect, false);
      // document.getElementById('labelFile').addEventListener('change', handleFileSelect, false);
    </script>
  </body>
</html>